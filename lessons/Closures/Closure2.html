<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/amanj-course/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/amanj-course/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/amanj-course/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/amanj-course/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/amanj-course/images/favicon.ico"/><title>Closures Advanced Concepts – Complete Javascript Course</title><meta name="description" content="A complete and in-depth Javascript Course"/><meta name="keywords" content="Javascript,amanjacademy,Pouria Jahandideh,mentoring"/><meta name="og:description" content="A complete and in-depth Javascript Course"/><meta name="og:title" content="Closures Advanced Concepts – Complete Javascript Course"/><meta name="og:image" content="/amanj-course/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="14"/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/amanj-course/_next/static/css/d196e0d0dfd8fc07.css" as="style"/><link rel="stylesheet" href="/amanj-course/_next/static/css/d196e0d0dfd8fc07.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/amanj-course/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/amanj-course/_next/static/chunks/webpack-66c433a5d8f7fea6.js" defer=""></script><script src="/amanj-course/_next/static/chunks/framework-305cb810cde7afac.js" defer=""></script><script src="/amanj-course/_next/static/chunks/main-d02a98e4e9e16077.js" defer=""></script><script src="/amanj-course/_next/static/chunks/pages/_app-3aa2f340fe7a4ccd.js" defer=""></script><script src="/amanj-course/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-256b8ae18150ec8c.js" defer=""></script><script src="/amanj-course/_next/static/NEJzsti51tmK1ekE80i9c/_buildManifest.js" defer=""></script><script src="/amanj-course/_next/static/NEJzsti51tmK1ekE80i9c/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/amanj-course">Complete Javascript Course</a></h1><div class="navbar-info"><a href="https://amanjacademy.com/javascript/" class="cta-btn">Watch on Amanj Academy</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>In this next lesson on closures in JavaScript, we&#39;ll delve deeper into some advanced concepts and explore practical examples.</p>
<h2 id="closures-with-function-parameters">Closures with Function Parameters</h2>
<p>Closures can capture not only variables from their containing scope but also function parameters. This allows for dynamic behavior based on the arguments passed to a function. Let&#39;s look at an example:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createMultiplier</span>(<span class="hljs-params">factor</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">number</span>) {
    <span class="hljs-keyword">return</span> number * factor;
  };
}

<span class="hljs-keyword">const</span> double = <span class="hljs-title function_">createMultiplier</span>(<span class="hljs-number">2</span>);
<span class="hljs-keyword">const</span> triple = <span class="hljs-title function_">createMultiplier</span>(<span class="hljs-number">3</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">double</span>(<span class="hljs-number">5</span>)); <span class="hljs-comment">// Output: 10</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">triple</span>(<span class="hljs-number">5</span>)); <span class="hljs-comment">// Output: 15</span>
</code></pre>
<p>In this example, the <code>createMultiplier</code> function takes a <code>factor</code> parameter and returns a closure that multiplies a given <code>number</code> by that <code>factor</code>. We create two specialized multiplier functions, <code>double</code> and <code>triple</code>, by invoking <code>createMultiplier</code> with different factors. Each closure captures its respective <code>factor</code>, allowing for dynamic behavior when you call <code>double(5)</code> or <code>triple(5)</code>.</p>
<h2 id="closures-and-data-encapsulation">Closures and Data Encapsulation</h2>
<p>Closures play a crucial role in achieving data encapsulation and privacy in JavaScript. You can create private variables and methods within an object, making certain data inaccessible from outside the object. Here&#39;s an example:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createPerson</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-keyword">const</span> privateAge = <span class="hljs-number">0</span>;

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">getName</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">return</span> name;
    },
    <span class="hljs-attr">getAge</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">return</span> privateAge;
    },
    <span class="hljs-attr">setAge</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">newAge</span>) {
      <span class="hljs-keyword">if</span> (newAge &gt;= <span class="hljs-number">0</span>) {
        privateAge = newAge;
      }
    },
  };
}

<span class="hljs-keyword">const</span> person = <span class="hljs-title function_">createPerson</span>(<span class="hljs-string">&quot;Alice&quot;</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person.<span class="hljs-title function_">getName</span>()); <span class="hljs-comment">// Output: Alice</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person.<span class="hljs-title function_">getAge</span>()); <span class="hljs-comment">// Output: 0</span>

person.<span class="hljs-title function_">setAge</span>(<span class="hljs-number">30</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person.<span class="hljs-title function_">getAge</span>()); <span class="hljs-comment">// Output: 30</span>

person.<span class="hljs-property">privateAge</span> = -<span class="hljs-number">5</span>; <span class="hljs-comment">// This does not change the privateAge value</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person.<span class="hljs-title function_">getAge</span>()); <span class="hljs-comment">// Output: 30</span>
</code></pre>
<p>In this example, the <code>createPerson</code> function returns an object with methods for getting and setting the person&#39;s name and age. The <code>privateAge</code> variable is inaccessible from outside the object, ensuring data privacy.</p>
<h2 id="closures-and-asynchronous-operations">Closures and Asynchronous Operations</h2>
<p>Closures are commonly used in asynchronous programming, especially with callbacks. Here&#39;s a simple example using the <code>setTimeout</code> function:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">delayedGreeting</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">${name}</span>!`</span>);
  }, <span class="hljs-number">1000</span>);
}

<span class="hljs-title function_">delayedGreeting</span>(<span class="hljs-string">&quot;Bob&quot;</span>); <span class="hljs-comment">// Output after 1 second: Hello, Bob!</span>
</code></pre>
<p>In this code, the anonymous function passed to <code>setTimeout</code> captures the <code>name</code> parameter from the <code>delayedGreeting</code> function&#39;s scope. When the timeout elapses, the closure still has access to <code>name</code>, allowing it to print the correct greeting.</p>
<h2 id="closures-and-loop-pitfalls">Closures and Loop Pitfalls</h2>
<p>Closures can lead to unexpected behavior when used within loops if you&#39;re not careful. For example:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i);
  }, <span class="hljs-number">1000</span>);
}
</code></pre>
<p>In this code, you might expect the output to be <code>0</code>, <code>1</code>, and <code>2</code> after one-second intervals. However, the output will be <code>3</code>, <code>3</code>, and <code>3</code>. This is because the closure in the <code>setTimeout</code> function captures the variable <code>i</code>, which is modified by the loop, and when the function executes, it prints the final value of <code>i</code> (which is <code>3</code>).</p>
<p>To solve this problem, you can use an IIFE (Immediately Invoked Function Expression) to capture the value of <code>i</code> at each iteration:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  (<span class="hljs-keyword">function</span>(<span class="hljs-params">index</span>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(index);
    }, <span class="hljs-number">1000</span>);
  })(i);
}
</code></pre>
<p>By creating a new scope with the IIFE and passing <code>i</code> as <code>index</code>, you ensure that each closure captures the correct value of <code>i</code>.</p>
<p>Closures are a powerful feature in JavaScript that enables a wide range of programming techniques, from data encapsulation to asynchronous programming. However, it&#39;s essential to understand their behavior, especially when dealing with loops and asynchronous code, to avoid common pitfalls.</p>
</div><div class="lesson-links"><a href="/amanj-course/lessons/Closures/Closure1" class="prev">← Previous</a><a href="/amanj-course/lessons/DOM/document-object-model" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/pjsofts"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40" height="32" viewBox="0 0 40 32"><defs><clipPath id="clip-twitter-social"><rect width="40" height="32"></rect></clipPath></defs><g id="twitter-social" clip-path="url(#clip-twitter-social)"><g id="Group_269" data-name="Group 269" transform="translate(-230.23 -1140.849)"><path id="Path_419" data-name="Path 419" d="M266.12,1148.861v1.035a23.092,23.092,0,0,1-1.507,8.1,24.08,24.08,0,0,1-4.475,7.381,22.175,22.175,0,0,1-7.306,5.4,24.129,24.129,0,0,1-10,2.07,23.7,23.7,0,0,1-6.667-.945,22.83,22.83,0,0,1-5.936-2.655q.959.091,1.963.09a16.518,16.518,0,0,0,5.434-.9,17.111,17.111,0,0,0,4.749-2.52,8.275,8.275,0,0,1-4.749-1.643,7.8,7.8,0,0,1-2.877-3.983,8.268,8.268,0,0,0,1.507.135,8.58,8.58,0,0,0,2.146-.27,8.16,8.16,0,0,1-5.685-4.344,8.326,8.326,0,0,1-.89-3.578v-.135a7.775,7.775,0,0,0,3.744,1.035,8.183,8.183,0,0,1-2.671-2.9,7.817,7.817,0,0,1-.982-3.848,7.948,7.948,0,0,1,1.1-4.05,23.53,23.53,0,0,0,16.895,8.46,9.221,9.221,0,0,1-.183-1.845,7.787,7.787,0,0,1,1.1-4.05,8.216,8.216,0,0,1,2.991-2.948,7.991,7.991,0,0,1,4.087-1.1,8.184,8.184,0,0,1,5.982,2.566,16.087,16.087,0,0,0,5.205-1.98,7.784,7.784,0,0,1-1.393,2.588,8.4,8.4,0,0,1-2.215,1.913,16.856,16.856,0,0,0,4.749-1.305A17.032,17.032,0,0,1,266.12,1148.861Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><a href="https://github.com/pjsofts"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/pouria-jahandideh-879040157"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Excercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"title":"Closures Advanced Concepts"},"html":"\u003cp\u003eIn this next lesson on closures in JavaScript, we\u0026#39;ll delve deeper into some advanced concepts and explore practical examples.\u003c/p\u003e\n\u003ch2 id=\"closures-with-function-parameters\"\u003eClosures with Function Parameters\u003c/h2\u003e\n\u003cp\u003eClosures can capture not only variables from their containing scope but also function parameters. This allows for dynamic behavior based on the arguments passed to a function. Let\u0026#39;s look at an example:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreateMultiplier\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efactor\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003enumber\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e number * factor;\n  };\n}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e double = \u003cspan class=\"hljs-title function_\"\u003ecreateMultiplier\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e triple = \u003cspan class=\"hljs-title function_\"\u003ecreateMultiplier\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e);\n\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003edouble\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)); \u003cspan class=\"hljs-comment\"\u003e// Output: 10\u003c/span\u003e\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003etriple\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)); \u003cspan class=\"hljs-comment\"\u003e// Output: 15\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn this example, the \u003ccode\u003ecreateMultiplier\u003c/code\u003e function takes a \u003ccode\u003efactor\u003c/code\u003e parameter and returns a closure that multiplies a given \u003ccode\u003enumber\u003c/code\u003e by that \u003ccode\u003efactor\u003c/code\u003e. We create two specialized multiplier functions, \u003ccode\u003edouble\u003c/code\u003e and \u003ccode\u003etriple\u003c/code\u003e, by invoking \u003ccode\u003ecreateMultiplier\u003c/code\u003e with different factors. Each closure captures its respective \u003ccode\u003efactor\u003c/code\u003e, allowing for dynamic behavior when you call \u003ccode\u003edouble(5)\u003c/code\u003e or \u003ccode\u003etriple(5)\u003c/code\u003e.\u003c/p\u003e\n\u003ch2 id=\"closures-and-data-encapsulation\"\u003eClosures and Data Encapsulation\u003c/h2\u003e\n\u003cp\u003eClosures play a crucial role in achieving data encapsulation and privacy in JavaScript. You can create private variables and methods within an object, making certain data inaccessible from outside the object. Here\u0026#39;s an example:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreatePerson\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ename\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e privateAge = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n    \u003cspan class=\"hljs-attr\"\u003egetName\u003c/span\u003e: \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e name;\n    },\n    \u003cspan class=\"hljs-attr\"\u003egetAge\u003c/span\u003e: \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e privateAge;\n    },\n    \u003cspan class=\"hljs-attr\"\u003esetAge\u003c/span\u003e: \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003enewAge\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (newAge \u0026gt;= \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) {\n        privateAge = newAge;\n      }\n    },\n  };\n}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e person = \u003cspan class=\"hljs-title function_\"\u003ecreatePerson\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Alice\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(person.\u003cspan class=\"hljs-title function_\"\u003egetName\u003c/span\u003e()); \u003cspan class=\"hljs-comment\"\u003e// Output: Alice\u003c/span\u003e\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(person.\u003cspan class=\"hljs-title function_\"\u003egetAge\u003c/span\u003e()); \u003cspan class=\"hljs-comment\"\u003e// Output: 0\u003c/span\u003e\n\nperson.\u003cspan class=\"hljs-title function_\"\u003esetAge\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e);\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(person.\u003cspan class=\"hljs-title function_\"\u003egetAge\u003c/span\u003e()); \u003cspan class=\"hljs-comment\"\u003e// Output: 30\u003c/span\u003e\n\nperson.\u003cspan class=\"hljs-property\"\u003eprivateAge\u003c/span\u003e = -\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e// This does not change the privateAge value\u003c/span\u003e\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(person.\u003cspan class=\"hljs-title function_\"\u003egetAge\u003c/span\u003e()); \u003cspan class=\"hljs-comment\"\u003e// Output: 30\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn this example, the \u003ccode\u003ecreatePerson\u003c/code\u003e function returns an object with methods for getting and setting the person\u0026#39;s name and age. The \u003ccode\u003eprivateAge\u003c/code\u003e variable is inaccessible from outside the object, ensuring data privacy.\u003c/p\u003e\n\u003ch2 id=\"closures-and-asynchronous-operations\"\u003eClosures and Asynchronous Operations\u003c/h2\u003e\n\u003cp\u003eClosures are commonly used in asynchronous programming, especially with callbacks. Here\u0026#39;s a simple example using the \u003ccode\u003esetTimeout\u003c/code\u003e function:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edelayedGreeting\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ename\u003c/span\u003e) {\n  \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`Hello, \u003cspan class=\"hljs-subst\"\u003e${name}\u003c/span\u003e!`\u003c/span\u003e);\n  }, \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e);\n}\n\n\u003cspan class=\"hljs-title function_\"\u003edelayedGreeting\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Bob\u0026quot;\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// Output after 1 second: Hello, Bob!\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn this code, the anonymous function passed to \u003ccode\u003esetTimeout\u003c/code\u003e captures the \u003ccode\u003ename\u003c/code\u003e parameter from the \u003ccode\u003edelayedGreeting\u003c/code\u003e function\u0026#39;s scope. When the timeout elapses, the closure still has access to \u003ccode\u003ename\u003c/code\u003e, allowing it to print the correct greeting.\u003c/p\u003e\n\u003ch2 id=\"closures-and-loop-pitfalls\"\u003eClosures and Loop Pitfalls\u003c/h2\u003e\n\u003cp\u003eClosures can lead to unexpected behavior when used within loops if you\u0026#39;re not careful. For example:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e i = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; i \u0026lt; \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e; i++) {\n  \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(i);\n  }, \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn this code, you might expect the output to be \u003ccode\u003e0\u003c/code\u003e, \u003ccode\u003e1\u003c/code\u003e, and \u003ccode\u003e2\u003c/code\u003e after one-second intervals. However, the output will be \u003ccode\u003e3\u003c/code\u003e, \u003ccode\u003e3\u003c/code\u003e, and \u003ccode\u003e3\u003c/code\u003e. This is because the closure in the \u003ccode\u003esetTimeout\u003c/code\u003e function captures the variable \u003ccode\u003ei\u003c/code\u003e, which is modified by the loop, and when the function executes, it prints the final value of \u003ccode\u003ei\u003c/code\u003e (which is \u003ccode\u003e3\u003c/code\u003e).\u003c/p\u003e\n\u003cp\u003eTo solve this problem, you can use an IIFE (Immediately Invoked Function Expression) to capture the value of \u003ccode\u003ei\u003c/code\u003e at each iteration:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e i = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; i \u0026lt; \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e; i++) {\n  (\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eindex\u003c/span\u003e) {\n    \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(index);\n    }, \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e);\n  })(i);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBy creating a new scope with the IIFE and passing \u003ccode\u003ei\u003c/code\u003e as \u003ccode\u003eindex\u003c/code\u003e, you ensure that each closure captures the correct value of \u003ccode\u003ei\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eClosures are a powerful feature in JavaScript that enables a wide range of programming techniques, from data encapsulation to asynchronous programming. However, it\u0026#39;s essential to understand their behavior, especially when dealing with loops and asynchronous code, to avoid common pitfalls.\u003c/p\u003e\n","markdown":"\nIn this next lesson on closures in JavaScript, we'll delve deeper into some advanced concepts and explore practical examples.\n\n## Closures with Function Parameters\n\nClosures can capture not only variables from their containing scope but also function parameters. This allows for dynamic behavior based on the arguments passed to a function. Let's look at an example:\n\n```javascript\nfunction createMultiplier(factor) {\n  return function(number) {\n    return number * factor;\n  };\n}\n\nconst double = createMultiplier(2);\nconst triple = createMultiplier(3);\n\nconsole.log(double(5)); // Output: 10\nconsole.log(triple(5)); // Output: 15\n```\n\nIn this example, the `createMultiplier` function takes a `factor` parameter and returns a closure that multiplies a given `number` by that `factor`. We create two specialized multiplier functions, `double` and `triple`, by invoking `createMultiplier` with different factors. Each closure captures its respective `factor`, allowing for dynamic behavior when you call `double(5)` or `triple(5)`.\n\n## Closures and Data Encapsulation\n\nClosures play a crucial role in achieving data encapsulation and privacy in JavaScript. You can create private variables and methods within an object, making certain data inaccessible from outside the object. Here's an example:\n\n```javascript\nfunction createPerson(name) {\n  const privateAge = 0;\n\n  return {\n    getName: function() {\n      return name;\n    },\n    getAge: function() {\n      return privateAge;\n    },\n    setAge: function(newAge) {\n      if (newAge \u003e= 0) {\n        privateAge = newAge;\n      }\n    },\n  };\n}\n\nconst person = createPerson(\"Alice\");\n\nconsole.log(person.getName()); // Output: Alice\nconsole.log(person.getAge()); // Output: 0\n\nperson.setAge(30);\nconsole.log(person.getAge()); // Output: 30\n\nperson.privateAge = -5; // This does not change the privateAge value\nconsole.log(person.getAge()); // Output: 30\n```\n\nIn this example, the `createPerson` function returns an object with methods for getting and setting the person's name and age. The `privateAge` variable is inaccessible from outside the object, ensuring data privacy.\n\n## Closures and Asynchronous Operations\n\nClosures are commonly used in asynchronous programming, especially with callbacks. Here's a simple example using the `setTimeout` function:\n\n```javascript\nfunction delayedGreeting(name) {\n  setTimeout(function() {\n    console.log(`Hello, ${name}!`);\n  }, 1000);\n}\n\ndelayedGreeting(\"Bob\"); // Output after 1 second: Hello, Bob!\n```\n\nIn this code, the anonymous function passed to `setTimeout` captures the `name` parameter from the `delayedGreeting` function's scope. When the timeout elapses, the closure still has access to `name`, allowing it to print the correct greeting.\n\n## Closures and Loop Pitfalls\n\nClosures can lead to unexpected behavior when used within loops if you're not careful. For example:\n\n```javascript\nfor (var i = 0; i \u003c 3; i++) {\n  setTimeout(function() {\n    console.log(i);\n  }, 1000);\n}\n```\n\nIn this code, you might expect the output to be `0`, `1`, and `2` after one-second intervals. However, the output will be `3`, `3`, and `3`. This is because the closure in the `setTimeout` function captures the variable `i`, which is modified by the loop, and when the function executes, it prints the final value of `i` (which is `3`).\n\nTo solve this problem, you can use an IIFE (Immediately Invoked Function Expression) to capture the value of `i` at each iteration:\n\n```javascript\nfor (var i = 0; i \u003c 3; i++) {\n  (function(index) {\n    setTimeout(function() {\n      console.log(index);\n    }, 1000);\n  })(i);\n}\n```\n\nBy creating a new scope with the IIFE and passing `i` as `index`, you ensure that each closure captures the correct value of `i`.\n\nClosures are a powerful feature in JavaScript that enables a wide range of programming techniques, from data encapsulation to asynchronous programming. However, it's essential to understand their behavior, especially when dealing with loops and asynchronous code, to avoid common pitfalls.","slug":"Closure2","title":"Closures Advanced Concepts","section":"Closures","icon":"info-circle","filePath":"/home/runner/work/amanj-course/amanj-course/lessons/11-Closures/02-Closure2.md","nextSlug":"/amanj-course/lessons/DOM/document-object-model","prevSlug":"/amanj-course/lessons/Closures/Closure1"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"Closures","slug":"Closure2"},"buildId":"NEJzsti51tmK1ekE80i9c","assetPrefix":"/amanj-course","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>